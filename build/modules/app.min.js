angular.module("app",["ngResource","ui.router","ui.bootstrap","item","item-new","items","overlay"]).config(["$stateProvider",function(e){"use strict";e.state("app",{url:"",views:{main:{templateUrl:"modules/app/app.html"}}})}]).controller("app",["$rootScope","$scope","$state","Data",function(e,t,n,i){"use strict";t.data=i,t.loggedIn=!1,t.navbarCollapsed=!0,t.username="admin",t.login=function(){t.data.get({section:"users",id:t.username},function(i){e.user=i,t.loggedIn=!0,n.go("items")})},t.logout=function(){t.loggedIn=!1,n.go("app")}}]).factory("Data",["$rootScope","$resource",function(e,t){"use strict";return{resource:t("data/:section.json",null,{get:{method:"GET",isArray:!1,params:{section:"@section",id:"@id"},url:"data/:section/:id.json"},post:{method:"POST",isArray:!1,params:{section:"@section",id:"@id"},url:"data/:section/:id.json"},query:{method:"GET",isArray:!0,params:{section:"@section",id:"@id"}}}),get:function(e,t,n){var i=this;i.resource.get(e,null,function(n){i.setData(n,e.section,e.id),t&&t(n)},n)},post:function(e,t,n){var i=this;i.resource.post(e,i.getData(e.section,e.id),function(e){t&&t(e)},n)},query:function(e,t,n){var i=this;i.resource.query(e,null,function(n){i.setData(n,e.section,e.id),t&&t(n)},n)},setData:function(e,t,n){"number"==typeof n?(this[t+"_detail"]||(this[t+"_detail"]={}),this[t+"_detail"][n]=e):this[t]=e},getData:function(e,t){return"number"==typeof t?0===t?this[e+"_new"]:this[e+"_detail"][t]:this[e]}}}]),angular.module("item",["ui.router"]).controller("item",["$rootScope","$scope","$stateParams","Data",function(e,t,n,i){"use strict";t.data=i,t.editable=!1,t.num=!1,n.id&&(e.id=Number(n.id),t.data.get({section:"items",id:e.id},function(e){t.item=e})),t.edit=function(){t.editable=!0},t.save=function(){t.isDisabled=!0,t.data.post({section:"items",id:e.id},function(){t.isDisabled=!1,t.editable=!1})},t.addSection=function(){var e=angular.copy(t.item.sections[t.item.sections.length-1]);t.item.sections.push(e)},t.removeSection=function(){t.item.sections.splice(t.item.sections.length-1,t.item.sections.length)}}]).filter("timecode",[function(){"use strict";return function(e){function t(e){return 10>e?String("0"+Math.floor(e)):String(Math.floor(e))}var n=30,i=60*n,o=60*i,a=t(e/o),s=t(e%o/i),r=t(e%o%i/n),u=t(e%o%i%n);return a+":"+s+":"+r+":"+u}}]).directive("timecode",[function(){"use strict";return{restrict:"AE",template:'<input type="text" ng-model="hours" ng-focus="onFocus($event)" ng-keyup="onChange(\'hours\', $event)" maxlength="2" /><span class="divider">:</span><input type="text" ng-model="minutes" ng-focus="onFocus($event)" ng-keyup="onChange(\'minutes\', $event)" maxlength="2" /><span class="divider">:</span><input type="text" ng-model="seconds" ng-focus="onFocus($event)" ng-keyup="onChange(\'seconds\', $event)" maxlength="2" /><span class="divider">:</span><input type="text" ng-model="milliseconds" ng-focus="onFocus($event)" ng-keyup="onChange(\'milliseconds\', $event)" maxlength="2" />',scope:{model:"=ngModel"},link:function(e,t,n){var i=null,o=n.ngSecond?Number(n.ngSecond):1e3,a=n.ngMinute?Number(n.ngMinute)*o:60*o,s=n.ngHour?Number(n.ngHour)*a:60*a;e.numToTime=function(t){e.model=t,e.hours=e.format(t/s),e.minutes=e.format(t%s/a),e.seconds=e.format(t%s%a/o),e.milliseconds=e.format(t%s%a%o)},e.format=function(e){return 10>e?String("0"+Math.floor(e)):String(Math.floor(e))},e.timeToNum=function(){e.model=Number(e.hours)*s+Number(e.minutes)*a+Number(e.seconds)*o},e.onChange=function(t,n){if(i)if(38===n.which||40===n.which){var r=0;r="hours"===t?38===n.which?e.model+s:e.model-s:"minutes"===t?38===n.which?e.model+a:e.model-a:"seconds"===t?38===n.which?e.model+o:e.model-o:38===n.which?e.model+1:e.model-1,r>=0&&(e.numToTime(r),e.highlight())}else 37===n.which?(n.preventDefault(),i.value=e.format(i.value),i=i.previousElementSibling?i.previousElementSibling.previousElementSibling:i,e.highlight()):39===n.which?(n.preventDefault(),i.value=e.format(i.value),i=i.nextElementSibling?i.nextElementSibling.nextElementSibling:i,e.highlight()):2===i.value.length&&(i.value=e.format(i.value),e.timeToNum())},e.onFocus=function(t){i=t.target||i,e.highlight()},e.highlight=function(){window.setTimeout(function(){i.focus(),i.select()},1)},e.numToTime(e.model)}}}]),angular.module("item-new",["ui.router"]).controller("item-new",["$scope","$state","Data",function(e,t,n){"use strict";e.data=n,e.data.items_new={date:new Date},e.accordianOpen1=!0,e.accordianOpen2=!1,e.save=function(){e.isDisabled=!0,e.data.post({section:"items",id:0},function(){e.isDisabled=!1,t.go("items")})}}]),angular.module("items",["ngResource","ui.bootstrap","ui.router"]).config(["$stateProvider",function(e){"use strict";e.state("items",{url:"/items",views:{"main@":{templateUrl:"modules/items/items.html"}}}).state("items.new",{url:"/new",views:{"sidebar@items":{templateUrl:"modules/item-new/item-new.html",controller:"item-new"}}}).state("items.view",{url:"/:id",views:{"sidebar@items":{templateUrl:"modules/item/item.html",controller:"item"}}})}]).controller("items",["$scope","$stateParams","$filter","Data",function(e,t,n,i){"use strict";e.filters={name:"",category:""},e.currentPage=1,e.pageSize=10,e.data=i,e.data.query({section:"items"}),e.createDate=function(){var e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e},e.filter=function(t,n){"date"===t?(e.dateType=n,e.dateStart=e.createDate(),e.dateEnd=e.createDate(),e.showRange=!1,"week"===n?e.dateStart.setDate(e.dateStart.getDate()-7):"month"===n?e.dateStart.setMonth(e.dateStart.getMonth()-1):"year"===n?e.dateStart.setFullYear(e.dateStart.getFullYear()-1):"range"===n&&(e.showRange=!0,e.dateStart.setFullYear(e.dateStart.getFullYear()-1))):e.filters[t]=n},e.openDate=function(t,n){t.preventDefault(),t.stopPropagation(),e[n]=!0},e.selectDate=function(){e.dateType="range"},e.dateFilter=function(t){var n=864e5,i=new Date(t.date);return i.getTime()>=e.dateStart.getTime()&&i.getTime()<=e.dateEnd.getTime()+n?!0:!1},e.filter("date","year")}]).filter("startFrom",[function(){"use strict";return function(e,t){return e?e.slice(t):e}}]),angular.module("overlay",["ngResource","ui.router","ui.bootstrap"]).provider("modalState",["$stateProvider",function(e){"use strict";var t=this;this.$get=function(){return t},this.state=function(t,n){var i=null;e.state(t,{url:n.url,onEnter:function(e,o){i=e.open(n),i.result["finally"](function(){i=null,o.$current.name===t&&window.history.back()})},onExit:function(){i&&i.close&&i.close()}})}}]).config(["modalStateProvider",function(e){"use strict";e.state("overlay",{url:"/overlay/:template",templateUrl:"modules/overlay/overlay.html"})}]);